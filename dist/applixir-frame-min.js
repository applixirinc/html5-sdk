function loadApplixir(){function t(a){"undefined"!=typeof a.userId&&(g=a.userId),"undefined"!=typeof a.maxRetryCount&&(j=a.maxRetryCount),"undefined"!=typeof a.reportStateEnabled&&(m=a.reportStateEnabled),"undefined"!=typeof a.zoneId&&(p=a.zoneId,l=p),"undefined"!=typeof a.fallbackZoneId&&(o=a.fallbackZoneId)}function u(){h||(google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),e=document.getElementById("contentElement"),w(),h=!0)}function v(){document.getElementById("label").innerHTML=1*parseInt("0")+"%",q.style.width=parseInt("0")+"%";var a=new google.ima.AdsRequest;a.adTagUrl="https://ssd.appprizes.com/foobar/foobar/foobar/foobar/fc.php?script=apVideo:vast2&foo="+l,a.linearAdSlotWidth=640,a.linearAdSlotHeight=400,a.nonLinearAdSlotWidth=640,a.nonLinearAdSlotHeight=150,b.requestAds(a)}function w(){x(),b=new google.ima.AdsLoader(c),b.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,z,!1),b.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,J,!1)}function x(){c=new google.ima.AdDisplayContainer(document.getElementById("adContainer"),e)}function y(){c.initialize();try{a.init(640,360,google.ima.ViewMode.NORMAL),a.start()}catch(a){J(a)}}function z(b){var c=new google.ima.AdsRenderingSettings;a=b.getAdsManager(e,c),a.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,J),a.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,K),a.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,L),a.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,E),a.addEventListener(google.ima.AdEvent.Type.SKIPPED,E),a.addEventListener(google.ima.AdEvent.Type.LOADED,E),a.addEventListener(google.ima.AdEvent.Type.STARTED,E),a.addEventListener(google.ima.AdEvent.Type.COMPLETE,E),y()}function E(b){switch(f=b.getAd(),b.type){case google.ima.AdEvent.Type.LOADED:i=0,k=!1,l=p;break;case google.ima.AdEvent.Type.STARTED:F("s"),r.style.display="block",A=a.getRemainingTime(),null!==d&&(clearInterval(d),d=null),d=setInterval(function(){B=a.getRemainingTime(),H()},300),setTimeout(function(){a.getRemainingTime()==A&&(null!==d&&(clearInterval(d),d=null),C=15,A=15,D=2,d=setInterval(function(){D++,B=A-D,H()},1e3))},2e3);break;case google.ima.AdEvent.Type.SKIPPED:F("i"),parent.postMessage("didVideoCompleteFalse","*"),G();break;case google.ima.AdEvent.Type.COMPLETE:k||(F("c"),parent.postMessage("didVideoCompleteTrue","*"),k=!0),G()}}function F(a){if(m){var b=document.createElement("img");b.setAttribute("src","//developer.applixir.com/postback.php?e="+a+"&u="+g+"&z="+p),b.setAttribute("alt","na"),b.setAttribute("height","1px"),b.setAttribute("width","1px"),document.body.appendChild(b)}}function H(){var a=A-B,b=a/A*100;q.style.width=parseInt(b)+"%",document.getElementById("label").innerHTML=1*parseInt(b)+"%"}function I(){null!==o&&(l=l===p?o:p)}function J(a){++i<=j?(I(),console&&console.log&&console.log("retrying with zone:"+l+" retryCount:"+i),window.setTimeout(v,400)):(i=0,F("e"),parent.postMessage("didVideoCompleteFalse","*"),parent.postMessage("videoLoadError","*"),parent.postMessage("closeApplixirPlayer","*"))}function K(){}function L(){}var a,b,c,d,e,f,g=0,h=!1,i=0,j=3,k=!1,l=null,m=!1,n={},o=null,p=null,q=document.getElementById("myBar"),r=document.getElementById("appprizes-close");r.addEventListener("click",function(){k=!0,F("i"),parent.postMessage("didVideoCompleteFalse","*"),parent.postMessage("closeApplixirPlayer","*"),a.stop(),G()});var s=function(a){if(void 0!==a.data.message)switch(a.data.message){case"setOptions":n=a.data.value,t(n),v();break;case"setUserId":g=a.data.value;break;case"enableReportState":m=!0;break;case"disableReportState":m=!1;break;case"displayApplixirAd":v()}};window.addEventListener("message",s,!1);var A=null,B=0,C=30,D=0,G=function(){null!==d&&(clearInterval(d),parent.postMessage("closeApplixirPlayer","*"),d=null)};u()}var callback=loadApplixir;!function(){var a="//imasdk.googleapis.com/js/sdkloader/ima3.js",b=document.createElement("script");b.type="text/javascript",b.src=a,b.async=!1,b.onreadystatechange=b.onload=function(){var a=b.readyState;callback.done||a&&!/loaded|complete/.test(a)||(callback.done=!0,callback())},(document.body||head).appendChild(b)}();